#find is already recusive & (single|double) quotation is must
find . \
    -type d \( \
            -wholename './lib' -o \
            -wholename './vc6' -o \
            -name 'gen' -o \
            -name '.svn' \
            \) -prune -o \
    -type f \( \
            -name '*.h' -o \
            -name '*.cpp' -o \
            -name '*.c' -o \
            -name '*.lua' -o \
            -name '*.*awk' \) -print \
    | sort

#http://stackoverflow.com/questions/14304731/finding-only-numbers-at-the-beginning-of-a-filename-with-regex
find . -type f -regex '.*/[0-9]+.log$'  ^ \d not recongized

find . -exec rm {} \;  -delete  #http://unix.stackexchange.com/questions/167823/find-exec-rm-vs-delete
#http://talk.linuxtoy.org/using-cli/
history | awk '{CMD[$2]++;count++;}END { for (a in CMD)\
print CMD[a] " " CMD[a]/count*100 "% " a;}' | grep -v "./" \
| column -c3 -s " " -t | sort -nr | nl | head -n10

#http://www.linuxquestions.org/questions/linux-general-1/how-to-change-owner-and-group-in-a-directory-to-include-subdir-and-all-files-205358/
you have to use the -R or --recursive option for chown.
e.g.: chown -R someuser:somegroup home/
#newsmth fcfarseer  count code
find /usr/include/boost -type f | xargs wc -l | tail -n1
#http://stackoverflow.com/questions/9157138/how-to-recursively-count-files-in-a-linux-directory

find . -not -path "*/.svn*" -not -type d -exec grep -ni "myfunc" {} \; -print
the only difference between the output is that "grep -Rni" will print the file name for each match, whereas "find -exec grep" will print the filename on one line and then one line for each match (with line number and line content). using "grep -Hni" forces the filename to be displayed on each line 
#http://superuser.com/questions/66715/recursive-grep-exclude-specific-directories
find /dir \( -name node_modules -prune \) -o -name "*.sh" -exec grep --color -Hn "your text to find" {} 2>/dev/null \;
#http://stackoverflow.com/questions/6565471/how-can-i-exclude-directories-from-grep-r?lq=1
find . \( -path ./layouts -prune \) -o  \( -path ./tests -prune \) -o -exec grep --color -Hni "walk(" {} \; -print
#\( no must

(time /bin/ls) &> /tmp/u  #http://www.linuxquestions.org/questions/linux-general-1/strace-redirecting-to-file-456212/

<C-R> reverse search

http://stackoverflow.com/questions/3510673/find-and-kill-a-process-in-one-line-using-bash-and-regex
google kill ps aux grep
kill $(ps aux | grep '[p]ython csp_build.py' | awk '{print $2}')
ps aux | awk '/..\/[p]ython csp.py/ {print $2}'

http://unix.stackexchange.com/questions/91561/ps-full-command-is-too-long
ps auxww

ps ­e ­o comm= ­o %mem= | sort ­nrk2 | head ­n10 #from newsmth

#https://github.com/Valloric/YouCompleteMe
echo | clang -v -E -x c++ -
gcc -Wp,-v -E -
#http://stackoverflow.com/questions/22178946/whats-going-on-with-clangs-include-priorities

unzip all.zip
bzip2 -d all.bz2
bunzip2 all.bz2
tar -xjf all.tar.bz2

uncompress all.Z
tar -xZf all.tar.z

tar -tf all.tar
tar -xjf test.tbz -C /tmp/test 

$ tar -ztvf file.tar.gz
tar -tf file.tar.gz #list files
tar -xzvf file.tar.gz #extract
$ tar -jtvf file.tar.bz2
xz -d path/to/.xz #http://superuser.com/questions/145846/howto-unzip-xz-file-with-7z-and-lzma

gzip -d *.gz
gunzip *.gz

#https://www.centos.org/docs/2/rhl-gsg-en-7.2/s1-zip-tar.html
#http://www.mkyong.com/linux/how-to-zip-unzip-tar-in-unix-linux/
#http://www.simplehelp.net/2008/12/15/how-to-create-and-extract-zip-tar-targz-and-tarbz2-files-in-linux/
tar -czvf /path/f.tar x.y x1.y1 

#http://askubuntu.com/questions/28476/how-do-i-zip-up-a-folder-but-exclude-the-git-subfolder
tar --exclude=.git -czvf vim.tar bundle/vundle/
#http://superuser.com/questions/312301/unix-zip-directory-but-excluded-specific-subdirectories-and-everything-within-t
zip -x '*.git*' -r vim.zip bundle/syntastic/ bundle/LeaderF/ bundle/vim-airline/ bundle/vim-javascript/ 
#http://stackoverflow.com/questions/984204/shell-command-to-tar-directory-excluding-certain-files-folders

#https://wiki.archlinux.org/index.php/pacman_Tips
alias pacins='sudo pacman -U'          # Install specific package not from the repositories but from a file 
alias pacrem='sudo pacman -Rnsu'       # Remove the specified package(s), its configuration(s) and unneeded dependencies
pacman -Qm
#List explicitly installed packages not in base or base-devel with size and description: 
expac(need install) -HM "%011m\t%-20n\t%10d" $( comm -23 <(pacman -Qqen|sort) <(pacman -Qqg base base-devel|sort) ) | sort -n

pacman -Rns $(pacman -Qtdq)

#https://wiki.archlinux.org/index.php/Pacman
pacman -S(Q)g #group info
?? #https://bbs.archlinux.org/viewtopic.php?pid=909497
pacman -Syyu --ignore x,y #Totally
pacman -Scc
pacman -Qe  #https://bbs.archlinux.org/viewtopic.php?id=38477
#https://www.archlinux.org/news/binaries-move-to-usrbin-requiring-update-intervention//
pacman -Qqo /bin /sbin /usr/sbin | pacman -Qm -
paclist <repo> | awk ' { print $1 } ' | pacman -Ql - | grep ' /s\?bin/\| /usr/sbin/'
find /bin /sbin /usr/sbin -exec pacman -Qo -- {} + >/dev/null
#https://wiki.archlinux.org/index.php/Pacman_Tips#Restore_pacman.27s_local_database

#https://bbs.archlinux.org/viewtopic.php?id=144616&p=1
#https://bbs.archlinux.org/viewtopic.php?pid=1126667#p1126667
/bin/ls:not found ==> /lib/ld-2.14.so /bin/ls
LDD -v  #https://bugs.archlinux.org/task/37511
LD_DEBUG=libs path
#http://stackoverflow.com/questions/10052041/how-to-list-library-dependencies-of-a-non-native-binary
objdump -x /bin/ls
readelf -d a.out | grep NEEDED
ldd /bin/ls
gdb info shared

#http://www.cyberciti.biz/faq/grub-boot-into-single-user-mode/
Boot Linux Grub Boot Loader into single user mode
(1) At grub boot screen (after restart)
(2) Select the kernel
(3) Press the e key to edit the entry
(4) Select second line (the line starting with the word kernel)
(5) Press the e key to edit kernel entry so that you can append single user mode
(6) Append the letter S (or word Single) to the end of the (kernel) line
(7) Press ENTER key
(8) Now press the b key to boot the Linux kernel into single user mode

#http://askubuntu.com/questions/9853/how-can-i-make-rc-local-run-on-startup
head -n1 /etc/rc.local

#https://forums.virtualbox.org/viewtopic.php?f=2&t=22264
XTerm*selectToClipboard:true &together with http://linux.seindal.dk/2005/06/16/xterm-and-the-clipboard/


#https://bbs.archlinux.org/viewtopic.php?pid=1005613
be sure you did pacman-key --init  and then set up in pacman.conf
SigLevel = Optional TrustAll
if importing key is slow, change the keyserver from /etc/pacman.d/gnupg/gpg.conf to hkp://pgp.mit.edu

yaourt installed because of chrome need of some version of libpng or some else lib

/usr/lib/initcpio/busybox #https://bbs.archlinux.org/viewtopic.php?id=144620&p=1

curl http://betterthangrep.com/ack-standalone > ~/bin/ack && chmod 0755 !#:3 


#http://stackoverflow.com/questions/16787916/difference-between-2-directories-in-linux
diff -r dir1 dir2 | grep dir1 | awk '{print $4}' > difference1.txt  {{
        diff -r dir1 dir2 shows which files are only in dir1 and those only in dir2
        diff -r dir1 dir2 | grep dir1 shows which files are only in dir1
        Finally use awk to print only filename.  }}

#http://stackoverflow.com/questions/6710878/diff-a-directory-recursively-ignoring-all-binary-files
#Maybe use grep -I (which is equivalent to grep --binary-files=without-match) as a filter to sort out binary files.
dir1='folder-1'
dir2='folder-2'
IFS=$'\n'
for file in $(grep -Ilsr -m 1 '.' "$dir1"); do   
    diff -q "$file" "${file/${dir1}/${dir2}}"
done
#http://superuser.com/questions/53374/how-to-diff-directories-for-different-files-but-not-line-by-line
diff -rq DIR1 DIR2 #-q is for brief, and will just tell you if the files are different (i.e., it won't show the line-by-line differences)
diff -rqb DIR1 DIR2 # -b ignores whitespace changes
#smth Orpherus arch的/居然27G了其中pkg有4G
sudo du -h --max-depth=3 /var/ | sort -rh | head -n 20


#http://middlewaremagic.com/jboss/?p=1723
rsync -avz localdir 5a5468a88aa74b8198b0bf1d12ea661f@blog-kayw.rhcloud.com:~/app-root/runtime/repo/diy
ssh rhcloud.com not end with /
http://superuser.com/questions/105837/rsync-over-ssh-or-something-else
http://ubuntuforums.org/showthread.php?t=2041722  rsync on both side
http://stackoverflow.com/questions/732039/rsyncing-files-between-two-remote-servers-get-errors-stating-rsync-command-not --rsync-path

#https://wiki.archlinux.org/index.php/Disable_clearing_of_boot_messages

#http://www.linuxforums.org/forum/programming-scripting/135110-sed-e-expression-1-char-24-unknown-option-s.html
sed s delimiter different with text content('echo' output)
#http://superuser.com/questions/246837/how-do-i-add-text-to-the-beginning-of-a-file-in-bash
echo 'task goes here' | cat - todo.txt > temp && mv temp todo.txt
{{ Pipe (|) the message (echo '...') to cat which uses - (standard input) as the first file and todo.txt as the second. cat conCATenates multiple files. Send the output (>) to a file named temp. If there are no errors (&&) from cat then rename (mv) the temp file back to the original file (todo.txt) }}
sed -i '1itask goes here' todo.txt

http://superuser.com/questions/62141/how-to-move-all-files-from-current-directory-to-upper-directory
http://superuser.com/questions/468255/how-to-mv-dot-files-without-including-the-parent-directory-on-linux-mac
mv .[^.]* somewhere/

#http://unix.stackexchange.com/questions/32460/excluding-some-of-the-commands-from-being-getting-stored-in-bash-history
#http://jorge.fbarr.net/2011/03/24/making-your-bash-history-more-efficient/
#
#http://stackoverflow.com/questions/4585929/how-to-use-cp-command-to-exclude-a-specific-directory
find . -type f -not -path '*/not-from-here/*' -exec cp '{}' '/dest/{}' \;
cp $(ls -laR !(subdir/file1|file2|subdir2/file3)) destination
rsync -av --progress sourcefolder /destinationfolder --exclude thefoldertoexclude

#http://elearning.linnbenton.edu/mod/forum/discuss.php?d=60056
* Summon XTerm with a hotkey >> ctrl-alt-T
* On xterm, press and hold the Control key and at the same time left-click and hold. "MainOptions" menu will appear
* On xterm, press and hold the Control key and at the same time right-click and hold. "UnicodeFonts" menu will appear

#http://stackoverflow.com/questions/3455625/linux-command-to-print-directory-structure-in-the-form-of-a-tree
alias lst='ls -R | grep ":$" | sed -e '"'"'s/:$//'"'"' -e 
          '"'"'s/[^-][^\/]*\//--/g'"'"' -e '"'"'s/^/   /'"'"' -e '"'"'s/-/|/'"'"

#http://askubuntu.com/questions/120928/what-is-the-mod4d-shortcut-key
xmodkey  Mod4key Super_L  ==> Win

Android:
repo init -u https://android.googlesource.com/platform/manifest
netcfg  == ip a (http://www.apkbus.com/android-43835-1-1.html)
http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/
http://stackoverflow.com/questions/6751911/android-emulation-on-virtual-box-in-eclipse   (port forward: VBoxManage modifyvm <name_of_your_android_vm> --natpf1 adb,tcp,*,5555: VBoxManage modifyvm <name_of_your_android_vm> --natpf1 adb,tcp,*,5555,*,55555)
http://stackoverflow.com/questions/12477987/android-usb-debugging-in-virtualbox

http://stackoverflow.com/questions/9210152/set-up-device-for-development-no-permissions
https://wiki.archlinux.org/index.php/android#Connecting_to_a_real_device_-_Android_Debug_Bridge_.28ADB.29
https://bbs.archlinux.org/viewtopic.php?id=137616

https://dl-ssl.* ==> http://
http://code.google.com/p/android/issues/detail?id=6424
http://stackoverflow.com/questions/9499563/no-repository-found-error-in-installing-adt-in-eclipse-indigo
-x86:
 shutdown host-key H(https://groups.google.com/forum/#!topic/android-x86/pEI7xAnOpNY)
http://forum.xda-developers.com/showthread.php?t=2556047
http://artemave.github.io/2013/05/01/faster-android-emulator-with-android-x86-on-virtualbox/
http://stackoverflow.com/questions/6751911/android-emulation-on-virtual-box-in-eclipse

#http://redkrieg.com/2010/10/11/adb-over-ssh-fun-with-port-forwards/
iptables -A INPUT -p tcp --dport 5555 -s 127.0.0.1 -j ACCEPT
iptables -A INPUT -p tcp --dport 5555 -j DROP

IOS:
http://stackoverflow.com/questions/8542614/download-xcode-4-2-documentation-for-offline-install


http://stackoverflow.com/questions/22357693/how-to-download-chromium-source-code
git clone https://chromium.googlesource.com/chromium/src

SrcMind:
debug+asserts/clang:
mkdir build && cd build
../configure --disable-optimized --enable-debug-symbols

export CC=/home/kayw/llvm/build/Debug+Asserts/bin/clang
export CXX=/home/kayw/llvm/build/Debug+Asserts/bin/clang++ 
cmake .. -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DLLVM_CONFIG_EXECUTABLE=/home/kayw/llvm/build/Debug+Asserts/bin/llvm-config
make

gdb --args ./generator/codebrowser_generator -b . -p woboq:`git describe` -o ../../../public_html/woboq `git ls-files .. | egrep '*\.cpp$'`

emacs:
c-n(ext) c-p(revious) c-b(ack) c-B


##linux administrator commands
grup>root (hd0,x)(with /dev) -> kernel (hd0,y)/vmlinuz* root=/dev/*(/dev/sda* or /dev/disk/by-uuid/*) -> initrd (hd0,y)/kernel* -> boot
#https://wiki.archlinux.org/index.php/Network_Debugging
ip a/ip link show dev eth0/ip addr /ip route/"/etc/resolv.conf"/host www.archlinux.org 8.8.4.4/dig /traceroute 8.8.4.4
#https://wiki.archlinux.org/index.php/Network_Configuration
lspci -v(Check the "Ethernet controller" entry)/dmesg | grep module_name(check that the driver was loaded)/ tee /etc/modules-load.d/tg3.conf <<< "tg3"/ln -s /dev/null /etc/udev/rules.d/80-net-name-slot.rules/ls /sys/class/net/ip addr add <IP address>/<subnet mask> dev <interface>/dhcpcd -k
#https://bbs.archlinux.org/viewtopic.php?pid=1019742
fdisk -l

hostname /etc/hostname

wc -l *.c *.h
find . -name *.cpp | xargs wc -l

#TexLive
#http://bbs.ctex.org/forum.php?mod=viewthread&tid=39624
update package: copy file & mktexlsr
texhash
kpsewhich
tlmgr

#Fonts
#https://wiki.archlinux.org/index.php/Font_Configuration_%28%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%29
fc-list
fontconfig path: /usr/share/fonts/ & ~/.fonts

#ViM
#http://stackoverflow.com/questions/4687009/opening-help-in-a-full-window
:h | only
#http://stackoverflow.com/questions/811193/how-to-convert-the-m-linebreak-to-normal-linebreak-in-a-file-opened-in-vim
^M <C-V><C-M>  \r\n => \r

#build system
#http://stackoverflow.com/questions/16661167/fatal-error-when-compiling-llvm-clang-cstddef-file-not-found
cmake .. -DCMAKE_BUILD_TYPE=Release -DLLVM_TARGETS_TO_BUILD="X86_64;JSBackend" \
-DLLVM_INCLUDE_EXAMPLES=OFF
#ycm install step
mkdir ycm_build
cd ycm_build/
cmake -G "Unix Makefiles" -DUSE_SYSTEM_LIBCLANG=ON . ../third_party/ycmd/cpp/
make ycm_support_libs
cmake -G "Unix Makefiles" . -DEXTERNAL_LIBCLANG_PATH=/home/kayw/share/codebase/srcmind/llvm/build/Debug+Asserts/lib/libclang.so ../third_party/ycmd/cpp/

#wget
#http://techpatterns.com/forums/about894.html

#https://bugzilla.mozilla.org/show_bug.cgi?id=757461
wget -q -m -p -k -E -T 5 -t 3 -R 'gz,bz2,zip,exe,download,flag*,login*,*\$history,*\$json' -D developer.mozilla.org -X '*/profiles' -np https://developer.mozilla.org/en-US/

#User_Group
#http://unix.stackexchange.com/questions/88562/cant-do-chown-chgrp-chmod-on-shared-dir-in-virtualbox-ubuntu-10-04
#https://wiki.archlinux.org/index.php/users_and_groups
id username
stat -c %A(G)(U) directory
useradd -m -G users,wheel -s /bin/bash xxx
#gentoo handbook part=1&chap=11
gpasswd -a [user] [group]
#http://www.cyberciti.biz/faq/understanding-etcpasswd-file-format/
#/etc/passwd /etc/group   /etc/gshadow

#https://bbs.archlinux.org/viewtopic.php?id=194318
grpck

#
#
#
#Network
nslookup -q=TXT _netblocks.google.com 8.8.8.8
tracepath 163.com
dig
time sh -c 'echo "GET /" | nc www.google.com 80 > /dev/null'  #https://github.com/rubygems/rubygems/issues/513

/sys/class/net/   dhcpcd@ethx.service
#https://wiki.archlinux.org/index.php/Network_Configuration

#Installation
#http://superuser.com/questions/668743/format-dev-sda-as-unallocated
dd if=/dev/zero of=/dev/sda bs=512 count=1 (remove partition table)
#http://www.linuxquestions.org/questions/linux-software-2/how-to-format-dev-sda-in-linux-637333/
mkfs.vfat(ext4) /dev/sda (just format)
#https://forums.gentoo.org/viewtopic-t-578345-highlight-inodes+device.html
df -h

su - 
#http://forums.gentoo.org/viewtopic-t-969200-start-0-postdays-0-postorder-asc-highlight-.html?sid=4c99312edf0f333a9ec380bbc2726059

#utility
screen window num > 9 switch with ctrl-a-'
#http://superuser.com/questions/342938/how-to-go-past-window-9-in-gnu-screen-without-going-to-window-list
#
#Time
#https://wiki.archlinux.org/index.php/Time

#
#http://unix.stackexchange.com/questions/158489/systemd-timesyncd-service-inactive-on-arch-on-vmware
#http://myunixlinuxarchive.blogspot.com/2014/10/systemd-timesyncdservice-inactive-on.html
comment out the ConditionVirtualization=no in /usr/lib/systemd/system/systemd-timesyncd.service
sudo systemctl daemon-reload
sudo systemctl restart systemd-timesyncd

systemctl --user  # http://www.linux.org.ru/forum/admin/10900964   https://wiki.archlinux.org/index.php/Systemd/User

or 
mkdir -p /etc/systemd/system/systemd-timesyncd.service.d
echo -e "[Unit]\nConditionVirtualization=" > /etc/systemd/system/systemd-timesyncd.service.d/allow_virt.conf
#http://askubuntu.com/questions/103643/cannot-echo-hello-x-txt-even-with-sudo
#http://unix.stackexchange.com/questions/109496/echo-3-proc-sys-vm-drop-caches-permission-denied-as-root (not achievable on remote machine)
#http://serverfault.com/questions/540492/sudo-echo-bla-etc-sysctl-conf-permission-denied
sudo bash -c 'echo "xx" > *.*'
echo -e "[Unit]\nConditionVirtualization=" | sudo tee /etc/systemd/system/systemd-timesyncd.service.d/allow_virt.conf
#https://wiki.archlinux.org/index.php/systemd-timesyncd
sudo timedatectl set-ntp true 
#https://bbs.archlinux.org/viewtopic.php?id=182172&p=2
sudo systemctl status systemd-timesyncd.service
sudo journalctl -u systemd-timesyncd.service -b
journalctl -p 0..3 -xn #high priority error https://wiki.archlinux.org/index.php/System_maintenance


##sudo
http://superuser.com/questions/39530/how-can-i-add-a-regular-user-to-the-sudoers-file
https://wiki.archlinux.org/index.php/Sudo  visudo kayw ALL=(ALL) ALL

http://unix.stackexchange.com/questions/151149/is-there-a-way-to-tell-sudo-to-set-my-username-as-owner-for-the-files-created-in
sudo install -o belmin /etc/foo.txt ~/foo.txt

http://unix.stackexchange.com/questions/40749/remove-duplicate-path-entries-with-awk-command
PATH=`echo -n $PATH | awk -v RS=: '{ if (!arr[$0]++) {printf("%s%s",!ln++?"":":",$0)}}'`
don't add {} for PATH
#http://askubuntu.com/questions/186808/every-command-fails-with-command-not-found-after-changing-bash-profile
#LOG FILE Cleanup
cat /dev/null > /file
#http://serverfault.com/questions/146913/nginx-error-log-was-huge-so-i-deleted-and-created-a-new-one-now-nginx-wont-st
#empty files in directory
find . -type f -exec sh -c '>{}' \;
#http://stackoverflow.com/questions/14564850/linux-command-to-empty-all-files-of-a-directory
#http://www.unix.com/unix-for-dummies-questions-and-answers/163081-dev-null-file-using-xargs.html
#see also http://serverfault.com/questions/155288/is-it-safe-to-remove-all-files-in-the-var-log-when-cleaning-a-servers-history   kill -HUP
find -ctime +30
#Delete all files:
find /var/log -type f -delete
#Delete all .gz and rotated file
find /var/log -type f -regex ".*\.gz$"
find /var/log -type f -regex ".*\.[0-9]$"
Try run command without "-delete", to test it.
#http://serverfault.com/questions/185253/delete-all-of-var-log
#
#http://stackoverflow.com/questions/11392478/how-to-replace-a-string-in-multiple-files-in-linux-command-line
find ./ -type f -exec sed -i 's/string1/string2/g' {} \;


/etc/tmpfiles.d/remove-private-tmp.conf  r /var/tmp/systemd-private-* - - - - -
journalctl --disk-usage
SystemMaxUse + SystemMaxUse/8 #https://bbs.archlinux.org/viewtopic.php?id=155451
journalctl -b --no-pager _SYSTEMD_UNIT=systemd-journald.service
#https://bbs.archlinux.org/viewtopic.php?pid=1173031

Edit /etc/systemd/journald.conf to set SystemMaxUse=1M
Restarting journal: sudo systemctl restart systemd-journald
Resetting SystemMaxUse=200M
Re-Restarting the journal #http://unix.stackexchange.com/questions/139513/how-to-clear-journalctl

# time sync server urls: http://www.pool.ntp.org/zone/cn
#
#
# Gentoo
emerge -pv package
#http://forums.gentoo.org/viewtopic-t-714214-start-0.html
